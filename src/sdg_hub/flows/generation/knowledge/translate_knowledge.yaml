version: "1.0"
blocks:
  - name: translation_document
    type: TranslationBlock
    config:
      config_path: ../../configs/knowledge/translate_documents.yaml
      output_cols:
      - document_translated
      source_lang: "hin_Deva"  # Source language (English)
      target_lang: "eng_Latn"  # Target language (French)
      trans_model_id: facebook/nllb-200-distilled-600M
      prompt_struct: "{document}"
  - name: gen_knowledge
    type: LLMBlock
    config:
      config_path: ../../configs/knowledge/simple_generate_qa_translate.yaml
      output_cols:
      - question
      - response
      gen_kwargs:
        max_tokens: 2048
        temperature: 0.7
        n: scaled
      parser_kwargs:
        parser_name: custom
        parsing_pattern: (?:Question|QUESTION)\:\s*(.*?)\s*(?:Answer|ANSWER)\:\s*(.*)
        parser_cleanup_tags:
          - "[END]"
          - "[End]"
      gen_kwargs:
        max_tokens: 2048
    drop_duplicates:
      - question
    model_family: granite
  - name: translation_qa
    type: TranslationBlock
    config:
      config_path: ../../configs/knowledge/translate_question_response.yaml
      output_cols:
      - question_translated
      - response_translated
      source_lang: "eng_Latn"  # Source language (English)
      target_lang: "hin_Deva"  # Target language (French)
      trans_model_id: facebook/nllb-200-distilled-600M
      prompt_struct: "{question}\n{response}"
